import{S as Gt,i as Mt,s as Xt,C as ut,w as Bt,x as Jt,y as Kt,z as Qt,A as Wt,q as Vt,o as Zt,B as eo,U as qt,e as a,t as l,k as m,c as n,a as r,h as s,d as o,m as c,b,a1 as to,g as f,F as t}from"../../../chunks/vendor-f73903c8.js";import{P as oo}from"../../../chunks/post-178ca962.js";import"../../../chunks/stores-2e642f94.js";import"../../../chunks/Progress-2d81d7be.js";/* empty css                                      */function lo(S){let h,y,v,g,d,w,p,be,q,Ce,Fe,z,xe,Ie,G,ge,Te,M,Oe,Pe,X,Se,De,B,Re,Le,le,D,je,se,R,J,vt,ie,L,Ae,ae,j,Ue,ne,C,Ne,K,$e,Ye,re,F,He,T,We,qe,fe,x,ze,O,Ge,Me,he,_,Xe,P,Be,Je,Q,Ke,Qe,pe,A,Ve,de,U,Ze,me,k,et,V,tt,ot,Z,lt,st,ce,E,it,ee,at,nt,te,rt,ft,ue,N,ht,ve,I,pt,oe,dt,mt,we,$,ct;return{c(){h=a("p"),y=l("This is somewhat related to my "),v=a("a"),g=l("previous post"),d=l(" about downloading all of my SoundCloud liked songs. I have another batch file that I use to save livestreams. It doesn\u2019t work for YouTube livestreams and probably not Twitch either. Often news sites or other random sites will work."),w=m(),p=a("p"),be=l("Go to the stream and open your internet browser\u2019s developer tools - in Chrome, "),q=a("code"),Ce=l("ctrl"),Fe=l(" + "),z=a("code"),xe=l("shift"),Ie=l(" + "),G=a("code"),ge=l("j"),Te=l(". Click the \u201CNetwork\u201D tab. You can optionally filter to the \u201CFetch/XHR\u201D traffic as well. Now, refresh the page and click play on the video if necessary. You will hopefully find a file that ends in .m3u8. Common filenames are "),M=a("code"),Oe=l("index.m3u8"),Pe=l(", "),X=a("code"),Se=l("playlist.m3u8"),De=l(", or "),B=a("code"),Re=l("manifest.m3u8"),Le=l(". Sometimes the file extension is just .m3u."),le=m(),D=a("p"),je=l("This is a playlist file which contains a list of \u201Clinks\u201D to the most recent chunks of video from the livestream. Often it will contain 3-5 chunks, and gets updated every few seconds. If you click on the file once, then click on the \u201CResponse\u201D or \u201CPreview\u201D tab, you\u2019ll see the contents of the file. For Example:"),se=m(),R=a("p"),J=a("img"),ie=m(),L=a("p"),Ae=l("An m3u8 file"),ae=m(),j=a("p"),Ue=l("In this case, the individual video chunks are .ts files. Each chunk is 2 seconds long. The path to the files are relative, because they don\u2019t start with \u201Chttps\u201D or a valid URL. This is fine, but it means we can\u2019t simply download the .m3u8 and use it because these .ts files will not be found. We\u2019ll use a link to this m3u8 file instead."),ne=m(),C=a("p"),Ne=l("Right click on the "),K=a("code"),$e=l("index.m3u8"),Ye=l(" > Copy > Copy link address. Save this for later."),re=m(),F=a("p"),He=l("We\u2019re going to make a batch file that takes an URL to an m3u8 file and saves a video, but first we\u2019ll need to have "),T=a("a"),We=l("FFmpeg"),qe=l(" installed."),fe=m(),x=a("p"),ze=l("FFmpeg is another command line tool to convert videos and tons of "),O=a("a"),Ge=l("other manipulation"),Me=l(". It\u2019s free, very powerful, and used in almost every video conversion tool you\u2019ve ever used."),he=m(),_=a("p"),Xe=l("I\u2019m on Windows, so I downloaded the .exe. I would recommend putting it in your Path again. Instructions for that are at the bottom of my "),P=a("a"),Be=l("SoundCloud post"),Je=l(". Adding the folder with the ffmpeg.exe will allow you to run FFmpeg by typing "),Q=a("code"),Ke=l("ffmpeg"),Qe=l(" in the command line. It\u2019s possible the installation will add it to your path anyway, but you may need to restart your computer for it to take effect."),pe=m(),A=a("p"),Ve=l("Next, we\u2019ll make the batch file. Make a new text file and add this inside of it:"),de=m(),U=a("p"),Ze=l(`@ECHO OFF
SET /p url=Stream Link:
SET /p name=Filename:
ECHO saving in downloads
START ffmpeg -protocol_whitelist file,http,https,tcp,tls,crypto -i \u201C%URL%\u201D -codec copy \u201CC:\\Users\\Frankie\\Downloads\\%name%.mkv\u201D`),me=m(),k=a("p"),et=l("You can change the path on the last line. The "),V=a("code"),tt=l("%name%"),ot=l(" is a variable which comes from the prompt in line 3. I\u2019m saving as an "),Z=a("code"),lt=l("mkv"),st=l(" file, but you could change this to mp4 or something else; from what I recall, it may be faster to save as an mkv."),ce=m(),E=a("p"),it=l("Save that text file as a "),ee=a("code"),at=l(".bat"),nt=l(" file, like "),te=a("code"),rt=l("streamDL.bat"),ft=l(". Now if you double-click it, it will as you to paste in the stream link that you copied before. Next add a filename - no file extension needed. Then it runs the ffmpeg command:"),ue=m(),N=a("p"),ht=l("ffmpeg -protocol_whitelist file,http,https,tcp,tls,crypto -i \u201C%URL%\u201D -codec copy \u201CyourFilename.mkv\u201D"),ve=m(),I=a("p"),pt=l("The important part here is the "),oe=a("code"),dt=l("-protocol_whitelist file,http,https,tcp,tls,crypto"),mt=l(" argument with lets FFmpeg read the .ts files using https or http."),we=m(),$=a("p"),ct=l("FFmpeg will automatically keep checking the m3u8 file and get the new ts files while the stream is running. If you go to the downloaded video file, you can refresh windows explorer and see that the file size is increasing."),this.h()},l(e){h=n(e,"P",{});var i=r(h);y=s(i,"This is somewhat related to my "),v=n(i,"A",{href:!0,rel:!0});var wt=r(v);g=s(wt,"previous post"),wt.forEach(o),d=s(i," about downloading all of my SoundCloud liked songs. I have another batch file that I use to save livestreams. It doesn\u2019t work for YouTube livestreams and probably not Twitch either. Often news sites or other random sites will work."),i.forEach(o),w=c(e),p=n(e,"P",{});var u=r(p);be=s(u,"Go to the stream and open your internet browser\u2019s developer tools - in Chrome, "),q=n(u,"CODE",{});var yt=r(q);Ce=s(yt,"ctrl"),yt.forEach(o),Fe=s(u," + "),z=n(u,"CODE",{});var _t=r(z);xe=s(_t,"shift"),_t.forEach(o),Ie=s(u," + "),G=n(u,"CODE",{});var kt=r(G);ge=s(kt,"j"),kt.forEach(o),Te=s(u,". Click the \u201CNetwork\u201D tab. You can optionally filter to the \u201CFetch/XHR\u201D traffic as well. Now, refresh the page and click play on the video if necessary. You will hopefully find a file that ends in .m3u8. Common filenames are "),M=n(u,"CODE",{});var Et=r(M);Oe=s(Et,"index.m3u8"),Et.forEach(o),Pe=s(u,", "),X=n(u,"CODE",{});var bt=r(X);Se=s(bt,"playlist.m3u8"),bt.forEach(o),De=s(u,", or "),B=n(u,"CODE",{});var Ct=r(B);Re=s(Ct,"manifest.m3u8"),Ct.forEach(o),Le=s(u,". Sometimes the file extension is just .m3u."),u.forEach(o),le=c(e),D=n(e,"P",{});var Ft=r(D);je=s(Ft,"This is a playlist file which contains a list of \u201Clinks\u201D to the most recent chunks of video from the livestream. Often it will contain 3-5 chunks, and gets updated every few seconds. If you click on the file once, then click on the \u201CResponse\u201D or \u201CPreview\u201D tab, you\u2019ll see the contents of the file. For Example:"),Ft.forEach(o),se=c(e),R=n(e,"P",{});var xt=r(R);J=n(xt,"IMG",{src:!0}),xt.forEach(o),ie=c(e),L=n(e,"P",{});var It=r(L);Ae=s(It,"An m3u8 file"),It.forEach(o),ae=c(e),j=n(e,"P",{});var gt=r(j);Ue=s(gt,"In this case, the individual video chunks are .ts files. Each chunk is 2 seconds long. The path to the files are relative, because they don\u2019t start with \u201Chttps\u201D or a valid URL. This is fine, but it means we can\u2019t simply download the .m3u8 and use it because these .ts files will not be found. We\u2019ll use a link to this m3u8 file instead."),gt.forEach(o),ne=c(e),C=n(e,"P",{});var ye=r(C);Ne=s(ye,"Right click on the "),K=n(ye,"CODE",{});var Tt=r(K);$e=s(Tt,"index.m3u8"),Tt.forEach(o),Ye=s(ye," > Copy > Copy link address. Save this for later."),ye.forEach(o),re=c(e),F=n(e,"P",{});var _e=r(F);He=s(_e,"We\u2019re going to make a batch file that takes an URL to an m3u8 file and saves a video, but first we\u2019ll need to have "),T=n(_e,"A",{href:!0,rel:!0});var Ot=r(T);We=s(Ot,"FFmpeg"),Ot.forEach(o),qe=s(_e," installed."),_e.forEach(o),fe=c(e),x=n(e,"P",{});var ke=r(x);ze=s(ke,"FFmpeg is another command line tool to convert videos and tons of "),O=n(ke,"A",{href:!0,rel:!0});var Pt=r(O);Ge=s(Pt,"other manipulation"),Pt.forEach(o),Me=s(ke,". It\u2019s free, very powerful, and used in almost every video conversion tool you\u2019ve ever used."),ke.forEach(o),he=c(e),_=n(e,"P",{});var Y=r(_);Xe=s(Y,"I\u2019m on Windows, so I downloaded the .exe. I would recommend putting it in your Path again. Instructions for that are at the bottom of my "),P=n(Y,"A",{href:!0,rel:!0});var St=r(P);Be=s(St,"SoundCloud post"),St.forEach(o),Je=s(Y,". Adding the folder with the ffmpeg.exe will allow you to run FFmpeg by typing "),Q=n(Y,"CODE",{});var Dt=r(Q);Ke=s(Dt,"ffmpeg"),Dt.forEach(o),Qe=s(Y," in the command line. It\u2019s possible the installation will add it to your path anyway, but you may need to restart your computer for it to take effect."),Y.forEach(o),pe=c(e),A=n(e,"P",{});var Rt=r(A);Ve=s(Rt,"Next, we\u2019ll make the batch file. Make a new text file and add this inside of it:"),Rt.forEach(o),de=c(e),U=n(e,"P",{});var Lt=r(U);Ze=s(Lt,`@ECHO OFF
SET /p url=Stream Link:
SET /p name=Filename:
ECHO saving in downloads
START ffmpeg -protocol_whitelist file,http,https,tcp,tls,crypto -i \u201C%URL%\u201D -codec copy \u201CC:\\Users\\Frankie\\Downloads\\%name%.mkv\u201D`),Lt.forEach(o),me=c(e),k=n(e,"P",{});var H=r(k);et=s(H,"You can change the path on the last line. The "),V=n(H,"CODE",{});var jt=r(V);tt=s(jt,"%name%"),jt.forEach(o),ot=s(H," is a variable which comes from the prompt in line 3. I\u2019m saving as an "),Z=n(H,"CODE",{});var At=r(Z);lt=s(At,"mkv"),At.forEach(o),st=s(H," file, but you could change this to mp4 or something else; from what I recall, it may be faster to save as an mkv."),H.forEach(o),ce=c(e),E=n(e,"P",{});var W=r(E);it=s(W,"Save that text file as a "),ee=n(W,"CODE",{});var Ut=r(ee);at=s(Ut,".bat"),Ut.forEach(o),nt=s(W," file, like "),te=n(W,"CODE",{});var Nt=r(te);rt=s(Nt,"streamDL.bat"),Nt.forEach(o),ft=s(W,". Now if you double-click it, it will as you to paste in the stream link that you copied before. Next add a filename - no file extension needed. Then it runs the ffmpeg command:"),W.forEach(o),ue=c(e),N=n(e,"P",{});var $t=r(N);ht=s($t,"ffmpeg -protocol_whitelist file,http,https,tcp,tls,crypto -i \u201C%URL%\u201D -codec copy \u201CyourFilename.mkv\u201D"),$t.forEach(o),ve=c(e),I=n(e,"P",{});var Ee=r(I);pt=s(Ee,"The important part here is the "),oe=n(Ee,"CODE",{});var Yt=r(oe);dt=s(Yt,"-protocol_whitelist file,http,https,tcp,tls,crypto"),Yt.forEach(o),mt=s(Ee," argument with lets FFmpeg read the .ts files using https or http."),Ee.forEach(o),we=c(e),$=n(e,"P",{});var Ht=r($);ct=s(Ht,"FFmpeg will automatically keep checking the m3u8 file and get the new ts files while the stream is running. If you go to the downloaded video file, you can refresh windows explorer and see that the file size is increasing."),Ht.forEach(o),this.h()},h(){b(v,"href","https://frankiemercado.com/2022/02/02/soundcloud-likes/"),b(v,"rel","nofollow"),to(J.src,vt="https://ihtfy.files.wordpress.com/2022/02/m3u8-snapshot.png?w=850")||b(J,"src",vt),b(T,"href","https://ffmpeg.org/download.html"),b(T,"rel","nofollow"),b(O,"href","https://ffmpeg.org/about.html"),b(O,"rel","nofollow"),b(P,"href","https://frankiemercado.com/2022/02/02/soundcloud-likes/"),b(P,"rel","nofollow")},m(e,i){f(e,h,i),t(h,y),t(h,v),t(v,g),t(h,d),f(e,w,i),f(e,p,i),t(p,be),t(p,q),t(q,Ce),t(p,Fe),t(p,z),t(z,xe),t(p,Ie),t(p,G),t(G,ge),t(p,Te),t(p,M),t(M,Oe),t(p,Pe),t(p,X),t(X,Se),t(p,De),t(p,B),t(B,Re),t(p,Le),f(e,le,i),f(e,D,i),t(D,je),f(e,se,i),f(e,R,i),t(R,J),f(e,ie,i),f(e,L,i),t(L,Ae),f(e,ae,i),f(e,j,i),t(j,Ue),f(e,ne,i),f(e,C,i),t(C,Ne),t(C,K),t(K,$e),t(C,Ye),f(e,re,i),f(e,F,i),t(F,He),t(F,T),t(T,We),t(F,qe),f(e,fe,i),f(e,x,i),t(x,ze),t(x,O),t(O,Ge),t(x,Me),f(e,he,i),f(e,_,i),t(_,Xe),t(_,P),t(P,Be),t(_,Je),t(_,Q),t(Q,Ke),t(_,Qe),f(e,pe,i),f(e,A,i),t(A,Ve),f(e,de,i),f(e,U,i),t(U,Ze),f(e,me,i),f(e,k,i),t(k,et),t(k,V),t(V,tt),t(k,ot),t(k,Z),t(Z,lt),t(k,st),f(e,ce,i),f(e,E,i),t(E,it),t(E,ee),t(ee,at),t(E,nt),t(E,te),t(te,rt),t(E,ft),f(e,ue,i),f(e,N,i),t(N,ht),f(e,ve,i),f(e,I,i),t(I,pt),t(I,oe),t(oe,dt),t(I,mt),f(e,we,i),f(e,$,i),t($,ct)},d(e){e&&o(h),e&&o(w),e&&o(p),e&&o(le),e&&o(D),e&&o(se),e&&o(R),e&&o(ie),e&&o(L),e&&o(ae),e&&o(j),e&&o(ne),e&&o(C),e&&o(re),e&&o(F),e&&o(fe),e&&o(x),e&&o(he),e&&o(_),e&&o(pe),e&&o(A),e&&o(de),e&&o(U),e&&o(me),e&&o(k),e&&o(ce),e&&o(E),e&&o(ue),e&&o(N),e&&o(ve),e&&o(I),e&&o(we),e&&o($)}}}function so(S){let h,y;const v=[S[0],zt];let g={$$slots:{default:[lo]},$$scope:{ctx:S}};for(let d=0;d<v.length;d+=1)g=ut(g,v[d]);return h=new oo({props:g}),{c(){Bt(h.$$.fragment)},l(d){Jt(h.$$.fragment,d)},m(d,w){Kt(h,d,w),y=!0},p(d,[w]){const p=w&1?Qt(v,[w&1&&Wt(d[0]),w&0&&Wt(zt)]):{};w&2&&(p.$$scope={dirty:w,ctx:d}),h.$set(p)},i(d){y||(Vt(h.$$.fragment,d),y=!0)},o(d){Zt(h.$$.fragment,d),y=!1},d(d){eo(h,d)}}}const zt={draft:!1,title:"livestreams",date:"2022-02-04",coverImage:"livestreams.jpg",desc:"TODO",tags:["todo"]};function io(S,h,y){return S.$$set=v=>{y(0,h=ut(ut({},h),qt(v)))},h=qt(h),[h]}class po extends Gt{constructor(h){super();Mt(this,h,io,so,Xt,{})}}export{po as default,zt as metadata};
