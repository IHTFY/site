var ge=Object.defineProperty,me=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var X=(n,e,s)=>e in n?ge(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s,Y=(n,e)=>{for(var s in e||(e={}))be.call(e,s)&&X(n,s,e[s]);if(W)for(var s of W(e))ke.call(e,s)&&X(n,s,e[s]);return n},Z=(n,e)=>me(n,ve(e));import{S as x,i as ee,s as te,e as j,t as T,c as V,a as $,h as B,d as k,b as C,g as q,F as m,G as z,a4 as we,j as Ce,H as le,l as se,k as F,m as L,M as Pe,N as ne,a2 as J,q as w,w as O,x as H,y as R,o as E,B as G,p as K,O as re,n as M,a5 as Ee}from"../../chunks/vendor-a3554607.js";import{S as ye,P as Ie}from"../../chunks/Progress-da00dd34.js";import{P as Se}from"../../chunks/PostCard-78d6bb96.js";import"../../chunks/stores-5109c37e.js";function je(n){let e,s,t,l,i,o;return{c(){e=j("div"),s=j("div"),t=T("#"),l=T(n[0]),this.h()},l(a){e=V(a,"DIV",{class:!0});var r=$(e);s=V(r,"DIV",{class:!0});var h=$(s);t=B(h,"#"),l=B(h,n[0]),h.forEach(k),r.forEach(k),this.h()},h(){C(s,"class","tag__name svelte-1ylwrw9"),C(e,"class","tag svelte-1ylwrw9")},m(a,r){q(a,e,r),m(e,s),m(s,t),m(s,l),i||(o=z(e,"click",function(){we(n[1])&&n[1].apply(this,arguments)}),i=!0)},p(a,[r]){n=a,r&1&&Ce(l,n[0])},i:le,o:le,d(a){a&&k(e),i=!1,o()}}}function Ve(n,e,s){let{label:t}=e,{onClick:l}=e;return n.$$set=i=>{"label"in i&&s(0,t=i.label),"onClick"in i&&s(1,l=i.onClick)},[t,l]}class De extends x{constructor(e){super();ee(this,e,Ve,je,te,{label:0,onClick:1})}}function oe(n,e,s){const t=n.slice();return t[13]=e[s],t}function ie(n,e,s){const t=n.slice();return t[16]=e[s],t}function ae(n,e,s){const t=n.slice();return t[19]=e[s],t}function fe(n){let e,s,t,l=[...new Set(n[5])],i=[];for(let o=0;o<l.length;o+=1)i[o]=ue(ae(n,l,o));return{c(){e=j("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=V(o,"DIV",{class:!0});var a=$(e);for(let r=0;r<i.length;r+=1)i[r].l(a);a.forEach(k),this.h()},h(){C(e,"class","input__autocomplete svelte-dou9ir")},m(o,a){q(o,e,a);for(let r=0;r<i.length;r+=1)i[r].m(e,null);t=!0},p(o,a){if(a&119){l=[...new Set(o[5])];let r;for(r=0;r<l.length;r+=1){const h=ae(o,l,r);i[r]?i[r].p(h,a):(i[r]=ue(h),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=l.length}},i(o){t||(Pe(()=>{s||(s=ne(e,re,{duration:100,y:-50},!0)),s.run(1)}),t=!0)},o(o){s||(s=ne(e,re,{duration:100,y:-50},!1)),s.run(0),t=!1},d(o){o&&k(e),J(i,o),o&&s&&s.end()}}}function ce(n){let e,s=n[19]+"",t,l,i=n[6][n[19]]+"",o,a,r=(n[6][n[19]]>1?"s":"")+"",h,y,I,P;function N(){return n[11](n[19])}return{c(){e=j("span"),t=T(s),l=T(" \u2022 "),o=T(i),a=T(" result"),h=T(r),y=F(),this.h()},l(v){e=V(v,"SPAN",{class:!0});var b=$(e);t=B(b,s),l=B(b," \u2022 "),o=B(b,i),a=B(b," result"),h=B(b,r),y=L(b),b.forEach(k),this.h()},h(){C(e,"class","autocomplete__item svelte-dou9ir")},m(v,b){q(v,e,b),m(e,t),m(e,l),m(e,o),m(e,a),m(e,h),m(e,y),I||(P=z(e,"click",N),I=!0)},p(v,b){n=v},d(v){v&&k(e),I=!1,P()}}}function ue(n){let e=n[19].match(new RegExp(n[2].substr(1))),s,t=e&&ce(n);return{c(){t&&t.c(),s=se()},l(l){t&&t.l(l),s=se()},m(l,i){t&&t.m(l,i),q(l,s,i)},p(l,i){i&4&&(e=l[19].match(new RegExp(l[2].substr(1)))),e?t?t.p(l,i):(t=ce(l),t.c(),t.m(s.parentNode,s)):t&&(t.d(1),t=null)},d(l){t&&t.d(l),l&&k(s)}}}function _e(n){let e,s,t=n[0],l=[];for(let o=0;o<t.length;o+=1)l[o]=he(ie(n,t,o));const i=o=>E(l[o],1,1,()=>{l[o]=null});return{c(){e=j("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=V(o,"DIV",{class:!0});var a=$(e);for(let r=0;r<l.length;r+=1)l[r].l(a);a.forEach(k),this.h()},h(){C(e,"class","posts__tags svelte-dou9ir")},m(o,a){q(o,e,a);for(let r=0;r<l.length;r+=1)l[r].m(e,null);s=!0},p(o,a){if(a&1){t=o[0];let r;for(r=0;r<t.length;r+=1){const h=ie(o,t,r);l[r]?(l[r].p(h,a),w(l[r],1)):(l[r]=he(h),l[r].c(),w(l[r],1),l[r].m(e,null))}for(M(),r=t.length;r<l.length;r+=1)i(r);K()}},i(o){if(!s){for(let a=0;a<t.length;a+=1)w(l[a]);s=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)E(l[a]);s=!1},d(o){o&&k(e),J(l,o)}}}function he(n){let e,s;function t(){return n[12](n[16])}return e=new De({props:{label:n[16],onClick:t}}),{c(){O(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,i){R(e,l,i),s=!0},p(l,i){n=l;const o={};i&1&&(o.label=n[16]),i&1&&(o.onClick=t),e.$set(o)},i(l){s||(w(e.$$.fragment,l),s=!0)},o(l){E(e.$$.fragment,l),s=!1},d(l){G(e,l)}}}function de(n){let e,s;return e=new Se({props:{title:n[13].title,href:`/post/${n[13].slug}`,desc:n[13].desc,date:n[13].date,tags:n[13].tags}}),{c(){O(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,l){R(e,t,l),s=!0},p(t,l){const i={};l&8&&(i.title=t[13].title),l&8&&(i.href=`/post/${t[13].slug}`),l&8&&(i.desc=t[13].desc),l&8&&(i.date=t[13].date),l&8&&(i.tags=t[13].tags),e.$set(i)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){G(e,t)}}}function $e(n){let e,s,t,l,i,o,a,r,h,y,I,P,N,v,b,u,S;e=new ye({props:{title:"Posts"}});let d=n[4]&&fe(n),p=n[0].length>0&&_e(n),D=n[3],_=[];for(let f=0;f<D.length;f+=1)_[f]=de(oe(n,D,f));const pe=f=>E(_[f],1,1,()=>{_[f]=null});return v=new Ie({}),{c(){O(e.$$.fragment),s=F(),t=j("section"),l=j("h1"),i=T("All Posts"),o=F(),a=j("div"),r=j("input"),h=F(),d&&d.c(),y=F(),p&&p.c(),I=F(),P=j("div");for(let f=0;f<_.length;f+=1)_[f].c();N=F(),O(v.$$.fragment),this.h()},l(f){H(e.$$.fragment,f),s=L(f),t=V(f,"SECTION",{class:!0});var c=$(t);l=V(c,"H1",{class:!0});var g=$(l);i=B(g,"All Posts"),g.forEach(k),o=L(c),a=V(c,"DIV",{class:!0});var A=$(a);r=V(A,"INPUT",{class:!0,id:!0,type:!0,placeholder:!0,"aria-label":!0}),h=L(A),d&&d.l(A),A.forEach(k),y=L(c),p&&p.l(c),I=L(c),P=V(c,"DIV",{class:!0});var Q=$(P);for(let U=0;U<_.length;U+=1)_[U].l(Q);Q.forEach(k),c.forEach(k),N=L(f),H(v.$$.fragment,f),this.h()},h(){C(l,"class","posts__title svelte-dou9ir"),C(r,"class","input__box svelte-dou9ir"),C(r,"id","posts__input"),C(r,"type","text"),C(r,"placeholder","Find post... (start with # to find tags)"),C(r,"aria-label","search post"),C(a,"class","post__input svelte-dou9ir"),C(P,"class","posts__cards svelte-dou9ir"),C(t,"class","posts svelte-dou9ir")},m(f,c){R(e,f,c),q(f,s,c),q(f,t,c),m(t,l),m(l,i),m(t,o),m(t,a),m(a,r),n[10](r),m(a,h),d&&d.m(a,null),m(t,y),p&&p.m(t,null),m(t,I),m(t,P);for(let g=0;g<_.length;g+=1)_[g].m(P,null);q(f,N,c),R(v,f,c),b=!0,u||(S=z(r,"input",n[7]),u=!0)},p(f,[c]){if(f[4]?d?(d.p(f,c),c&16&&w(d,1)):(d=fe(f),d.c(),w(d,1),d.m(a,null)):d&&(M(),E(d,1,1,()=>{d=null}),K()),f[0].length>0?p?(p.p(f,c),c&1&&w(p,1)):(p=_e(f),p.c(),w(p,1),p.m(t,I)):p&&(M(),E(p,1,1,()=>{p=null}),K()),c&8){D=f[3];let g;for(g=0;g<D.length;g+=1){const A=oe(f,D,g);_[g]?(_[g].p(A,c),w(_[g],1)):(_[g]=de(A),_[g].c(),w(_[g],1),_[g].m(P,null))}for(M(),g=D.length;g<_.length;g+=1)pe(g);K()}},i(f){if(!b){w(e.$$.fragment,f),w(d),w(p);for(let c=0;c<D.length;c+=1)w(_[c]);w(v.$$.fragment,f),b=!0}},o(f){E(e.$$.fragment,f),E(d),E(p),_=_.filter(Boolean);for(let c=0;c<_.length;c+=1)E(_[c]);E(v.$$.fragment,f),b=!1},d(f){G(e,f),f&&k(s),f&&k(t),n[10](null),d&&d.d(),p&&p.d(),J(_,f),f&&k(N),G(v,f),u=!1,S()}}}const Le=!0;async function Oe({fetch:n}){return{props:{posts:await(await n("/api/post.json")).json()}}}function Ne(n,e,s){let{posts:t}=e,l=null,i="",o="",a=[],r=[],h=!1;const y=t.map(u=>u.tags).flat(),I=y.reduce((u,S)=>Z(Y({},u),{[S]:(u[S]||0)+1}),{});function P({currentTarget:{value:u}}){if(s(4,h=!1),!u.match(/^#/)){s(9,i=u);return}s(2,o=u),s(4,h=!0)}function N(u){Ee[u?"unshift":"push"](()=>{l=u,s(1,l)})}const v=u=>{s(0,r=[...r,u]),s(1,l.value="",l),s(2,o=""),s(4,h=!1)},b=u=>{s(0,r=r.filter(S=>S!==u))};return n.$$set=u=>{"posts"in u&&s(8,t=u.posts)},n.$$.update=()=>{n.$$.dirty&769&&s(3,a=t.filter(u=>{const S=i.substr(1).toLowerCase(),d=u.title.toLowerCase().includes(S),p=u.slug.toLowerCase().includes(S),D=r.every(_=>u.tags.includes(_));return(d||p)&&D}))},[r,l,o,a,h,y,I,P,t,i,N,v,b]}class He extends x{constructor(e){super();ee(this,e,Ne,$e,te,{posts:8})}}export{He as default,Oe as load,Le as prerender};
