var ge=Object.defineProperty,me=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var X=(n,e,s)=>e in n?ge(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s,Y=(n,e)=>{for(var s in e||(e={}))be.call(e,s)&&X(n,s,e[s]);if(W)for(var s of W(e))ke.call(e,s)&&X(n,s,e[s]);return n},Z=(n,e)=>me(n,ve(e));import{S as x,i as ee,s as te,e as j,t as T,c as V,a as $,h as B,d as k,b as C,g as q,F as m,G as z,a4 as we,j as Ce,H as le,l as se,k as F,m as L,M as Pe,N as ne,a2 as J,q as w,w as O,x as H,y as R,o as E,B as G,p as K,O as re,n as M,a5 as Ee}from"../../chunks/vendor-f73903c8.js";import{S as ye,P as Se}from"../../chunks/Progress-9db5e1e4.js";import{P as Ie}from"../../chunks/PostCard-4caf642b.js";import"../../chunks/stores-233b7d65.js";function je(n){let e,s,t,l,o,i;return{c(){e=j("div"),s=j("div"),t=T("#"),l=T(n[0]),this.h()},l(a){e=V(a,"DIV",{class:!0});var r=$(e);s=V(r,"DIV",{class:!0});var h=$(s);t=B(h,"#"),l=B(h,n[0]),h.forEach(k),r.forEach(k),this.h()},h(){C(s,"class","tag__name svelte-1ylwrw9"),C(e,"class","tag svelte-1ylwrw9")},m(a,r){q(a,e,r),m(e,s),m(s,t),m(s,l),o||(i=z(e,"click",function(){we(n[1])&&n[1].apply(this,arguments)}),o=!0)},p(a,[r]){n=a,r&1&&Ce(l,n[0])},i:le,o:le,d(a){a&&k(e),o=!1,i()}}}function Ve(n,e,s){let{label:t}=e,{onClick:l}=e;return n.$$set=o=>{"label"in o&&s(0,t=o.label),"onClick"in o&&s(1,l=o.onClick)},[t,l]}class De extends x{constructor(e){super();ee(this,e,Ve,je,te,{label:0,onClick:1})}}function ie(n,e,s){const t=n.slice();return t[13]=e[s],t}function oe(n,e,s){const t=n.slice();return t[16]=e[s],t}function ae(n,e,s){const t=n.slice();return t[19]=e[s],t}function fe(n){let e,s,t,l=[...new Set(n[5])],o=[];for(let i=0;i<l.length;i+=1)o[i]=ue(ae(n,l,i));return{c(){e=j("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=V(i,"DIV",{class:!0});var a=$(e);for(let r=0;r<o.length;r+=1)o[r].l(a);a.forEach(k),this.h()},h(){C(e,"class","input__autocomplete svelte-dou9ir")},m(i,a){q(i,e,a);for(let r=0;r<o.length;r+=1)o[r].m(e,null);t=!0},p(i,a){if(a&119){l=[...new Set(i[5])];let r;for(r=0;r<l.length;r+=1){const h=ae(i,l,r);o[r]?o[r].p(h,a):(o[r]=ue(h),o[r].c(),o[r].m(e,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=l.length}},i(i){t||(Pe(()=>{s||(s=ne(e,re,{duration:100,y:-50},!0)),s.run(1)}),t=!0)},o(i){s||(s=ne(e,re,{duration:100,y:-50},!1)),s.run(0),t=!1},d(i){i&&k(e),J(o,i),i&&s&&s.end()}}}function ce(n){let e,s=n[19]+"",t,l,o=n[6][n[19]]+"",i,a,r=(n[6][n[19]]>1?"s":"")+"",h,y,S,P;function N(){return n[11](n[19])}return{c(){e=j("span"),t=T(s),l=T(" \u2022 "),i=T(o),a=T(" result"),h=T(r),y=F(),this.h()},l(v){e=V(v,"SPAN",{class:!0});var b=$(e);t=B(b,s),l=B(b," \u2022 "),i=B(b,o),a=B(b," result"),h=B(b,r),y=L(b),b.forEach(k),this.h()},h(){C(e,"class","autocomplete__item svelte-dou9ir")},m(v,b){q(v,e,b),m(e,t),m(e,l),m(e,i),m(e,a),m(e,h),m(e,y),S||(P=z(e,"click",N),S=!0)},p(v,b){n=v},d(v){v&&k(e),S=!1,P()}}}function ue(n){let e=n[19].match(new RegExp(n[2].substring(1),"i")),s,t=e&&ce(n);return{c(){t&&t.c(),s=se()},l(l){t&&t.l(l),s=se()},m(l,o){t&&t.m(l,o),q(l,s,o)},p(l,o){o&4&&(e=l[19].match(new RegExp(l[2].substring(1),"i"))),e?t?t.p(l,o):(t=ce(l),t.c(),t.m(s.parentNode,s)):t&&(t.d(1),t=null)},d(l){t&&t.d(l),l&&k(s)}}}function _e(n){let e,s,t=n[0],l=[];for(let i=0;i<t.length;i+=1)l[i]=he(oe(n,t,i));const o=i=>E(l[i],1,1,()=>{l[i]=null});return{c(){e=j("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=V(i,"DIV",{class:!0});var a=$(e);for(let r=0;r<l.length;r+=1)l[r].l(a);a.forEach(k),this.h()},h(){C(e,"class","posts__tags svelte-dou9ir")},m(i,a){q(i,e,a);for(let r=0;r<l.length;r+=1)l[r].m(e,null);s=!0},p(i,a){if(a&1){t=i[0];let r;for(r=0;r<t.length;r+=1){const h=oe(i,t,r);l[r]?(l[r].p(h,a),w(l[r],1)):(l[r]=he(h),l[r].c(),w(l[r],1),l[r].m(e,null))}for(M(),r=t.length;r<l.length;r+=1)o(r);K()}},i(i){if(!s){for(let a=0;a<t.length;a+=1)w(l[a]);s=!0}},o(i){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)E(l[a]);s=!1},d(i){i&&k(e),J(l,i)}}}function he(n){let e,s;function t(){return n[12](n[16])}return e=new De({props:{label:n[16],onClick:t}}),{c(){O(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,o){R(e,l,o),s=!0},p(l,o){n=l;const i={};o&1&&(i.label=n[16]),o&1&&(i.onClick=t),e.$set(i)},i(l){s||(w(e.$$.fragment,l),s=!0)},o(l){E(e.$$.fragment,l),s=!1},d(l){G(e,l)}}}function pe(n){let e,s;return e=new Ie({props:{title:n[13].title,href:`/post/${n[13].slug}`,desc:n[13].desc,date:n[13].date,tags:n[13].tags}}),{c(){O(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,l){R(e,t,l),s=!0},p(t,l){const o={};l&8&&(o.title=t[13].title),l&8&&(o.href=`/post/${t[13].slug}`),l&8&&(o.desc=t[13].desc),l&8&&(o.date=t[13].date),l&8&&(o.tags=t[13].tags),e.$set(o)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){G(e,t)}}}function $e(n){let e,s,t,l,o,i,a,r,h,y,S,P,N,v,b,u,I;e=new ye({props:{title:"Posts"}});let p=n[4]&&fe(n),d=n[0].length>0&&_e(n),D=n[3],_=[];for(let f=0;f<D.length;f+=1)_[f]=pe(ie(n,D,f));const de=f=>E(_[f],1,1,()=>{_[f]=null});return v=new Se({}),{c(){O(e.$$.fragment),s=F(),t=j("section"),l=j("h1"),o=T("All Posts"),i=F(),a=j("div"),r=j("input"),h=F(),p&&p.c(),y=F(),d&&d.c(),S=F(),P=j("div");for(let f=0;f<_.length;f+=1)_[f].c();N=F(),O(v.$$.fragment),this.h()},l(f){H(e.$$.fragment,f),s=L(f),t=V(f,"SECTION",{class:!0});var c=$(t);l=V(c,"H1",{class:!0});var g=$(l);o=B(g,"All Posts"),g.forEach(k),i=L(c),a=V(c,"DIV",{class:!0});var A=$(a);r=V(A,"INPUT",{class:!0,id:!0,type:!0,placeholder:!0,"aria-label":!0}),h=L(A),p&&p.l(A),A.forEach(k),y=L(c),d&&d.l(c),S=L(c),P=V(c,"DIV",{class:!0});var Q=$(P);for(let U=0;U<_.length;U+=1)_[U].l(Q);Q.forEach(k),c.forEach(k),N=L(f),H(v.$$.fragment,f),this.h()},h(){C(l,"class","posts__title svelte-dou9ir"),C(r,"class","input__box svelte-dou9ir"),C(r,"id","posts__input"),C(r,"type","text"),C(r,"placeholder","Find post... (start with # to find tags)"),C(r,"aria-label","search post"),C(a,"class","post__input svelte-dou9ir"),C(P,"class","posts__cards svelte-dou9ir"),C(t,"class","posts svelte-dou9ir")},m(f,c){R(e,f,c),q(f,s,c),q(f,t,c),m(t,l),m(l,o),m(t,i),m(t,a),m(a,r),n[10](r),m(a,h),p&&p.m(a,null),m(t,y),d&&d.m(t,null),m(t,S),m(t,P);for(let g=0;g<_.length;g+=1)_[g].m(P,null);q(f,N,c),R(v,f,c),b=!0,u||(I=z(r,"input",n[7]),u=!0)},p(f,[c]){if(f[4]?p?(p.p(f,c),c&16&&w(p,1)):(p=fe(f),p.c(),w(p,1),p.m(a,null)):p&&(M(),E(p,1,1,()=>{p=null}),K()),f[0].length>0?d?(d.p(f,c),c&1&&w(d,1)):(d=_e(f),d.c(),w(d,1),d.m(t,S)):d&&(M(),E(d,1,1,()=>{d=null}),K()),c&8){D=f[3];let g;for(g=0;g<D.length;g+=1){const A=ie(f,D,g);_[g]?(_[g].p(A,c),w(_[g],1)):(_[g]=pe(A),_[g].c(),w(_[g],1),_[g].m(P,null))}for(M(),g=D.length;g<_.length;g+=1)de(g);K()}},i(f){if(!b){w(e.$$.fragment,f),w(p),w(d);for(let c=0;c<D.length;c+=1)w(_[c]);w(v.$$.fragment,f),b=!0}},o(f){E(e.$$.fragment,f),E(p),E(d),_=_.filter(Boolean);for(let c=0;c<_.length;c+=1)E(_[c]);E(v.$$.fragment,f),b=!1},d(f){G(e,f),f&&k(s),f&&k(t),n[10](null),p&&p.d(),d&&d.d(),J(_,f),f&&k(N),G(v,f),u=!1,I()}}}const Le=!0;async function Oe({fetch:n}){return{props:{posts:await(await n("/api/post.json")).json()}}}function Ne(n,e,s){let{posts:t}=e,l=null,o="",i="",a=[],r=[],h=!1;const y=t.map(u=>u.tags).flat(),S=y.reduce((u,I)=>Z(Y({},u),{[I]:(u[I]||0)+1}),{});function P({currentTarget:{value:u}}){if(s(4,h=!1),!u.match(/^#/)){s(9,o=u);return}s(2,i=u),s(4,h=!0)}function N(u){Ee[u?"unshift":"push"](()=>{l=u,s(1,l)})}const v=u=>{s(0,r=[...new Set([...r,u])]),s(1,l.value="",l),s(2,i=""),s(4,h=!1)},b=u=>{s(0,r=r.filter(I=>I!==u))};return n.$$set=u=>{"posts"in u&&s(8,t=u.posts)},n.$$.update=()=>{n.$$.dirty&769&&s(3,a=t.filter(u=>{const I=o.substring(1).toLowerCase(),p=u.title.toLowerCase().includes(I),d=u.slug.toLowerCase().includes(I),D=r.every(_=>u.tags.includes(_));return(p||d)&&D}))},[r,l,i,a,h,y,S,P,t,o,N,v,b]}class He extends x{constructor(e){super();ee(this,e,Ne,$e,te,{posts:8})}}export{He as default,Oe as load,Le as prerender};
